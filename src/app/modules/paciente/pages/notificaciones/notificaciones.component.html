<div class="notificaciones-container">

  <!-- Filtros -->
  <div class="filtros">
    <button (click)="setTab('todas')" [class.active]="tab==='todas'">Todas</button>
    <button (click)="setTab('no-leidas')" [class.active]="tab==='no-leidas'">
      No leídas <span class="badge">{{ unreadCount }}</span>
    </button>
    <button (click)="setTab('leidas')" [class.active]="tab==='leidas'">
      Leídas <span class="badge">{{ readCount }}</span>
    </button>

    <input type="text" placeholder="Buscar notificación" />
  </div>

  <!-- Lista -->
  <div class="lista-notificaciones">
    <div *ngFor="let n of filtered" class="notificacion">
      <div class="icono">
        <mat-icon>{{ n.icono }}</mat-icon>
      </div>

      <div class="contenido">
        <p class="mensaje" [class.leida]="n.leida">{{ n.mensaje }}</p>
        <p class="detalle">{{ n.fecha }} · {{ n.tipo }}</p>
      </div>

      <div class="estado" [ngClass]="n.estado.toLowerCase()">{{ n.estado }}</div>

      <!-- Acciones -->
      <button class="accion"
              *ngIf="!n.leida"
              (click)="marcarLeida(n, true)"
              [disabled]="accionando.has(n.id)"
              title="Marcar como leída">
        <mat-icon>mark_email_read</mat-icon>
      </button>

      <button class="accion"
              *ngIf="n.leida"
              (click)="marcarLeida(n, false)"
              [disabled]="accionando.has(n.id)"
              title="Marcar como no leída">
        <mat-icon>mark_email_unread</mat-icon>
      </button>

      <button class="eliminar"
              (click)="eliminarNotificacion(n.id)"
              [disabled]="accionando.has(n.id)"
              title="Eliminar">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </div>
</div>
