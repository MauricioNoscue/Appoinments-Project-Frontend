<!-- view-citation-available.component.html -->
<app-calendar
  [idTypeCitation]="idTypeCitation"
  [todos]="todos"
  (dateChange)="onDateChange($event)"
  (blocksLoaded)="onBlocksLoaded($event)">
</app-calendar>

<div class="horarios-container" *ngIf="blocks.length > 0">
  <div class="header-section">
    <h2 class="horarios-title">Horarios disponibles</h2>
    <button class="toggle-view-btn" (click)="toggleView()">
      <span>{{ vistaColumnas ? 'Vista vertical' : 'Vista en columnas' }}</span>
      <span>{{ vistaColumnas ? 'ðŸ“‹' : 'ðŸ“Š' }}</span>
    </button>
  </div>
  
  <div class="horarios-grid" [class.columnas]="vistaColumnas">
    <!-- Horarios de MaÃ±ana -->
    <div class="horarios-section" *ngIf="horariosManana.length > 0">
      <h3 class="section-title">Horarios de MaÃ±ana</h3>
      <div class="horarios-scroll">
        <div 
          *ngFor="let horario of horariosManana" 
          class="horario-item"
          [class.horario-disponible]="horario.estaDisponible"
          [class.horario-ocupado]="!horario.estaDisponible"
          (click)="seleccionarHorario(horario)">
          
          <div class="horario-info">
            <div class="hora-label">Hora:</div>
            <div class="hora-time">{{ formatearHora(horario.hora) }}</div>
          </div>
          
          <div class="medico-info">
            <div class="especialidad">{{ especialidad }}</div>
            <div class="doctor-name">{{ nombreDoctor }}</div>
          </div>
          
          <div class="check-icon" *ngIf="horario.estaDisponible"></div>
          <div class="ocupado-indicator" *ngIf="!horario.estaDisponible"></div>
        </div>
      </div>
    </div>

    <!-- Horarios de Tarde -->
    <div class="horarios-section" *ngIf="horariosTarde.length > 0">
      <h3 class="section-title">Horarios de Tarde</h3>
      <div class="horarios-scroll">
        <div 
          *ngFor="let horario of horariosTarde" 
          class="horario-item"
          [class.horario-disponible]="horario.estaDisponible"
          [class.horario-ocupado]="!horario.estaDisponible"
          (click)="seleccionarHorario(horario)">
          
          <div class="horario-info">
            <div class="hora-label">Hora:</div>
            <div class="hora-time">{{ formatearHora(horario.hora) }}</div>
          </div>
          
          <div class="medico-info">
            <div class="especialidad">{{ especialidad }}</div>
            <div class="doctor-name">{{ nombreDoctor }}</div>
          </div>
          
          <div class="check-icon" *ngIf="horario.estaDisponible"></div>
          <div class="ocupado-indicator" *ngIf="!horario.estaDisponible"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Mensaje cuando no hay horarios -->
<div class="no-horarios" *ngIf="blocks.length === 0">
  <p>No hay horarios disponibles para la fecha seleccionada.</p>
</div>